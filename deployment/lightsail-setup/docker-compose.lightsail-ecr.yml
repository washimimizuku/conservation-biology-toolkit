version: '3.8'

services:
  nginx:
    image: ${ACCOUNT_ID}.dkr.ecr.${REGION}.amazonaws.com/conservation/nginx:latest
    ports:
      - "80:80"
    depends_on:
      - population-analysis
      - sampling-survey
      - genetic-diversity
      - species-assessment
      - habitat-landscape
      - climate-impact
      - conservation-planning
    restart: unless-stopped

  population-analysis:
    image: ${ACCOUNT_ID}.dkr.ecr.${REGION}.amazonaws.com/conservation/population-analysis:latest
    expose:
      - "8000"
    environment:
      - PORT=8000
    restart: unless-stopped

  sampling-survey:
    image: ${ACCOUNT_ID}.dkr.ecr.${REGION}.amazonaws.com/conservation/sampling-survey:latest
    expose:
      - "8000"
    environment:
      - PORT=8000
    restart: unless-stopped

  genetic-diversity:
    image: ${ACCOUNT_ID}.dkr.ecr.${REGION}.amazonaws.com/conservation/genetic-diversity:latest
    expose:
      - "8000"
    environment:
      - PORT=8000
    restart: unless-stopped

  species-assessment:
    image: ${ACCOUNT_ID}.dkr.ecr.${REGION}.amazonaws.com/conservation/species-assessment:latest
    expose:
      - "8000"
    environment:
      - PORT=8000
    restart: unless-stopped

  habitat-landscape:
    image: ${ACCOUNT_ID}.dkr.ecr.${REGION}.amazonaws.com/conservation/habitat-landscape:latest
    expose:
      - "8000"
    environment:
      - PORT=8000
    restart: unless-stopped

  climate-impact:
    image: ${ACCOUNT_ID}.dkr.ecr.${REGION}.amazonaws.com/conservation/climate-impact:latest
    expose:
      - "8000"
    environment:
      - PORT=8000
    restart: unless-stopped

  conservation-planning:
    image: ${ACCOUNT_ID}.dkr.ecr.${REGION}.amazonaws.com/conservation/conservation-planning:latest
    expose:
      - "8000"
    environment:
      - PORT=8000
    restart: unless-stopped